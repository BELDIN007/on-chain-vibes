<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>On-Chain Vibes</title>
    <!-- Tailwind CSS CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Ethers.js library for Web3 interactions -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script>
        // Tailwind CSS configuration to extend default theme
        tailwind.config = {
            darkMode: 'class', // Enable dark mode based on the 'dark' class on the HTML element
            theme: {
                extend: {
                    fontFamily: {
                        // Using Inter for a modern, clean look
                        inter: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // --- Base-Inspired Color Palette ---
                        'base-blue': '#0052FF', // Official Base blue - our new primary accent
                        
                        // Dark Mode Colors
                        'dark-bg': '#0A0A0A',      // Deep black for background
                        'dark-card': '#1A1A1A',    // Slightly lighter black for cards
                        'dark-text': '#F0F0F0',    // Off-white for primary text
                        'dark-subtle': '#4A4A4A',  // Darker grey for secondary text, borders, input backgrounds
                        
                        // Light Mode Colors
                        'light-bg': '#F0F4F8',     // Very light blue-grey for background
                        'light-card': '#FFFFFF',   // Pure white for cards
                        'light-text': '#1A202C',   // Dark blue-grey for primary text
                        'light-subtle': '#CBD5E0', // Light grey for secondary text, borders, input backgrounds
                    }
                }
            }
        }
    </script>
    <style>
        /* Apply Inter font globally and ensure a base font size */
        body {
            font-family: 'Inter', sans-serif;
            font-size: 16px; /* Base font size */
        }

        /* Custom scrollbar styling for the vibes feed */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }
        .overflow-y-auto::-webkit-scrollbar-track {
            background: var(--tw-colors-light-subtle); /* Light mode track */
            border-radius: 10px;
        }
        .dark .overflow-y-auto::-webkit-scrollbar-track {
            background: var(--tw-colors-dark-subtle); /* Dark mode track */
        }
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #A0AEC0; /* Neutral grey thumb */
            border-radius: 10px;
        }
        .dark .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #6B7280; /* Darker grey thumb for dark mode */
        }
        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #718096; /* Hover effect */
            cursor: pointer;
        }

        /* Hover effect for vibe cards */
        .vibe-card {
            transform: translateY(0); /* Ensure no initial transform */
            transition: all 0.2s ease-in-out; /* Smooth transition for all changes */
        }
        .vibe-card:hover {
            transform: translateY(-2px); /* Slightly lift the card */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for light mode */
            border-color: var(--tw-colors-base-blue); /* Highlight border with accent color */
        }
        .dark .vibe-card:hover {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4); /* More pronounced shadow for dark mode */
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 640px) {
            body {
                font-size: 14px;
            }
            .text-3xl {
                font-size: 2rem;
            }
            .text-2xl {
                font-size: 1.5rem;
            }
            .flex-col-mobile { /* Custom class for filter buttons on mobile */
                flex-direction: column;
            }
            .flex-col-mobile > button {
                width: 100%; /* Full width for buttons on mobile */
            }
        }
    </style>
</head>
<body class="bg-light-bg text-light-text min-h-screen flex flex-col items-center p-4 dark:bg-dark-bg dark:text-dark-text">

    <!-- Header section with dApp title and wallet connection -->
    <header class="w-full max-w-2xl flex justify-between items-center py-4 border-b border-light-subtle dark:border-dark-subtle mb-6">
        <h1 class="text-3xl font-bold text-base-blue">On-Chain Vibes âœ¨</h1>
        <div class="flex items-center gap-4">
            <!-- Theme Toggle Button -->
            <button id="theme-toggle-btn"
                    class="p-2 rounded-full bg-light-subtle text-light-text dark:bg-dark-subtle dark:text-dark-text hover:bg-light-subtle/70 dark:hover:bg-dark-subtle/70 focus:outline-none focus:ring-2 focus:ring-base-blue transition-colors">
                <!-- Icon will be set by JS -->
            </button>

            <div id="wallet-info" class="flex items-center">
                <!-- Button to connect wallet, initially visible -->
                <button id="connect-wallet-btn" class="bg-base-blue text-white px-4 py-2 rounded-lg font-semibold shadow-md transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-base-blue">
                    Connect Wallet
                </button>
                <!-- Placeholder for network status -->
                <span id="network-status" class="text-sm text-light-subtle dark:text-dark-subtle ml-2 hidden"></span>
            </div>
        </div>
    </header>

    <!-- Main content area -->
    <main class="w-full max-w-2xl flex flex-col gap-6">

        <!-- Section for posting new vibe messages -->
        <section class="bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold mb-4">Share Your Vibe</h2>
            <!-- Textarea for user to type their message -->
            <textarea
                id="vibe-message"
                placeholder="What's on your mind? Max 140 characters..."
                maxlength="140"
                class="w-full h-24 p-3 bg-light-subtle/50 dark:bg-dark-subtle/50 text-light-text dark:text-dark-text border border-light-subtle dark:border-dark-subtle rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-base-blue mb-3"
                aria-label="Vibe message input"
            ></textarea>
            <div class="flex justify-between items-center">
                <!-- Character count display -->
                <span id="char-count" class="text-sm text-light-subtle dark:text-dark-subtle">0/140</span>
                <!-- Button to post the vibe, initially disabled -->
                <button
                    id="post-vibe-btn"
                    class="bg-base-blue text-white px-5 py-2 rounded-lg font-semibold shadow-md transition-colors hover:bg-blue-700 disabled:bg-light-subtle dark:disabled:bg-dark-subtle disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-base-blue"
                    disabled
                >
                    Post Vibe
                </button>
            </div>
        </section>

        <!-- Section for displaying all posted vibes -->
        <section class="bg-light-card dark:bg-dark-card p-6 rounded-xl shadow-lg">
            <h2 class="text-2xl font-semibold mb-4">The Vibes Stream</h2>
            <!-- Filter/Search Input and Buttons -->
            <div class="flex flex-col sm:flex-row gap-2 mb-4">
                <input
                    type="text"
                    id="filter-input"
                    placeholder="Filter by address or text..."
                    class="flex-grow p-2 bg-light-subtle/50 dark:bg-dark-subtle/50 text-light-text dark:text-dark-text border border-light-subtle dark:border-dark-subtle rounded-lg focus:outline-none focus:ring-2 focus:ring-base-blue"
                    aria-label="Filter vibes by address or text"
                >
                <div class="flex gap-2 mt-2 sm:mt-0 flex-col-mobile sm:flex-row">
                    <button
                        id="apply-filter-btn"
                        class="bg-light-subtle text-light-text dark:bg-dark-subtle dark:text-dark-text px-4 py-2 rounded-lg font-semibold shadow-md transition-colors hover:bg-light-subtle/70 dark:hover:bg-dark-subtle/70 focus:outline-none focus:ring-2 focus:ring-base-blue"
                    >
                        Filter
                    </button>
                    <button
                        id="my-vibes-btn"
                        class="bg-base-blue text-white px-4 py-2 rounded-lg font-semibold shadow-md transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-base-blue disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled
                    >
                        My Vibes
                    </button>
                    <button
                        id="clear-filter-btn"
                        class="bg-light-subtle text-light-text dark:bg-dark-subtle dark:text-dark-text px-4 py-2 rounded-lg font-semibold shadow-md transition-colors hover:bg-light-subtle/70 dark:hover:bg-dark-subtle/70 focus:outline-none focus:ring-2 focus:ring-base-blue"
                    >
                        Clear
                    </button>
                </div>
            </div>

            <!-- Container for dynamically loaded vibe cards -->
            <div id="vibes-container" class="space-y-4 max-h-96 overflow-y-auto">
                <!-- Loading/initial message -->
                <p class="text-center text-light-subtle dark:text-dark-subtle py-4" id="loading-message">
                    Connect your wallet to see the vibes!
                </p>
            </div>
        </section>
    </main>

    <!-- Link to your JavaScript file -->
    <script src="app.js"></script>
</body>
</html>
